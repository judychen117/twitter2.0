(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-913d493c"],{"05b0":function(t,e,a){t.exports=a.p+"img/chat.b4f7574f.svg"},1602:function(t,e,a){"use strict";var r=a("2fa3"),s=function(){return localStorage.getItem("token")};e["a"]={users:{get:function(){return console.log(s()),r["b"].get("/users",{headers:{Authorization:"Bearer ".concat(s())}})}},user:{get:function(t){var e=t.id;return r["b"].get("/users/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})}},addFollowing:function(t){var e=t.id;return r["b"].post("/followships",{id:e},{headers:{Authorization:"Bearer ".concat(s())}})},deleteFollowing:function(t){var e=t.followingId;return r["b"].delete("/followships/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})},addLiked:function(t){return r["b"].post("/tweets/".concat(t,"/like"),null,{headers:{Authorization:"Bearer ".concat(s())}})},deleteLiked:function(t){return r["b"].post("/tweets/".concat(t,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(s())}})},getTweet:function(t){var e=t.id;return r["b"].get("/users/".concat(e,"/tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getReply:function(t){var e=t.id;return r["b"].get("/users/".concat(e,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(s())}})},getLike:function(t){var e=t.id;return r["b"].get("/users/".concat(e,"/likes"),{headers:{Authorization:"Bearer ".concat(s())}})},userEdit:{editSetting:function(t){var e=t.id,a=t.formData;return r["b"].put("/users/".concat(e),a,{headers:{Authorization:"Bearer ".concat(s())}})},getSetting:function(t){return r["b"].get("/users/".concat(t,"/edit"),{headers:{Authorization:"Bearer ".concat(s())}})}}}},3229:function(t,e,a){},"4ef5":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[a("NavBar"),a("div",{staticClass:"setting-form"},[a("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[a("div",[t._v("帳戶設定")]),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"account"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",placeholder:"帳號",autocomplete:"username",required:"",autofocus:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"name"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",placeholder:"name",autocomplete:"名稱",required:"",autofocus:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"email"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"Email",autocomplete:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"密碼",autocomplete:"new-password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password-check"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],staticClass:"form-control",attrs:{id:"password-check",name:"checkPassword",type:"password",placeholder:"密碼確認",autocomplete:"new-password"},domProps:{value:t.checkPassword},on:{input:function(e){e.target.composing||(t.checkPassword=e.target.value)}}})]),t._m(0)])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buttonStyle"},[a("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3 mt-4",attrs:{type:"submit"}},[t._v(" 儲存 ")])])}],n=a("1da1"),o=a("5530"),i=(a("96cf"),a("b0c0"),a("d178")),c=a("2f62"),l=a("2fa3"),u=a("1602"),m={components:{NavBar:i["a"]},data:function(){return{account:"",name:"",email:"",checkPassword:"",password:"",id:""}},computed:Object(o["a"])({},Object(c["b"])(["currentUser"])),created:function(){this.fetchCurrentUser()},methods:{fetchCurrentUser:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,s,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].userEdit.getSetting(t.currentUser.id);case 3:a=e.sent,r=a.data,console.log(r),s=r.name,n=r.email,o=r.account,i=r.id,t.account=o,t.name=s,t.email=n,t.id=i,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),l["a"].fire({icon:"error",title:"獲取資料失敗,請稍後再試"});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=t.target,s=new FormData(r),a.next=5,u["a"].userEdit.editSetting({id:e.id,formData:s});case 5:if(n=a.sent,o=n.data,"success"===o.status){a.next=9;break}throw new Error(o.message);case 9:e.fetchCurrentUser(),l["a"].fire({icon:"success",title:"儲存成功"}),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),l["a"].fire({icon:"error",title:"暫時無法修改資料,請稍後再試"});case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()}}},d=m,p=(a("cf97"),a("2877")),f=Object(p["a"])(d,r,s,!1,null,"3ba04bc0",null);e["default"]=f.exports},6222:function(t,e,a){},a5f6:function(t,e,a){"use strict";a("3229")},cf97:function(t,e,a){"use strict";a("6222")},d178:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nav-bar"},[r("div",{staticClass:"mt-3"},[r("router-link",{staticClass:"nav-logo",attrs:{to:{name:"tweets-main"}}},[r("img",{staticClass:"logo",attrs:{src:a("0eb7"),alt:"logo"}})]),r("ul",{staticClass:"nav-list"},[r("li",{staticClass:"nav-item nav-home"},[r("router-link",{attrs:{to:{name:"tweets-main"}}},[r("i",{staticClass:"nav-icon fas fa-home"}),r("p",[t._v("首頁")])])],1),r("li",{staticClass:"nav-item"},[r("router-link",{attrs:{to:{name:"chatroom"}}},[r("img",{staticClass:"nav-icon",attrs:{src:a("e334"),alt:"chat"}}),r("p",[t._v("通知")])])],1),r("li",{staticClass:"nav-item"},[r("router-link",{attrs:{to:{name:"chatroom"}}},[r("img",{staticClass:"nav-icon",attrs:{src:a("05b0"),alt:"chat"}}),r("p",[t._v("公開聊天室")])])],1),r("li",{staticClass:"nav-item"},[r("router-link",{attrs:{to:{name:"chatroom"}}},[r("img",{staticClass:"nav-icon",attrs:{src:a("05b0"),alt:"chat"}}),r("p",[t._v("私人訊息")])])],1),r("li",{staticClass:"nav-item nav-profile"},[r("router-link",{attrs:{to:{name:"user-profile-tweet",params:{id:t.currentUser.id}}}},[r("i",{staticClass:"nav-icon fas fa-user-alt"}),r("p",[t._v("個人資料")])])],1),r("li",{staticClass:"nav-item nav-setting"},[r("router-link",{attrs:{to:{name:"setting"}}},[r("i",{staticClass:"nav-icon fas fa-cog"}),r("p",[t._v("設定")])])],1),r("li",[r("button",{staticClass:"nav-teweet-button button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addPost(e)}}},[t._v(" 推文 ")])])]),r("router-link",{staticClass:"nav-item nav-sign-out",attrs:{to:{name:"login"}}},[r("i",{staticClass:"nav-icon fas fa-sign-out-alt",on:{click:t.logout}}),r("p",{on:{click:t.logout}},[t._v("登出")])])],1)])},s=[],n=a("5530"),o=a("2f62"),i={data:function(){return{showModal:"post"}},computed:Object(n["a"])({},Object(o["b"])(["currentUser","isAuthenticated"])),methods:{addPost:function(){this.showModal="post",this.$emit("show-post-modal",this.showModal)},logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")}}},c=i,l=(a("a5f6"),a("2877")),u=Object(l["a"])(c,r,s,!1,null,"19543579",null);e["a"]=u.exports},e334:function(t,e,a){t.exports=a.p+"img/Notice.4c08ba67.svg"}}]);
//# sourceMappingURL=chunk-913d493c.d1d65cef.js.map